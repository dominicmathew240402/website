<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Dominic Mathew">
        <meta property="og:title" content="Smart Plant">
        <title>Dashboard Ai Prediction</title>

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

        <link rel="stylesheet" href="/css/Dashboard-ai-testing.css">

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Signika:wght@500&display=swap" rel="stylesheet">
    </head>
<body>
<!------------------Side Navigation -------------------------->
  <div class="Header">
    <div class="side-nav">
      <a href="#" class="logo">
        <img src="/assets/Smart Plant.png" class="logo-img">
      </a>
      <ul class="nav-links">
        <li><a href="#"><i></i><p>Dashboard</p></a></li>
        <li><a href="/RealTime.html"><i><img class = "image-con" src="/assets/home.png"></i><p>Home</p></a></li>
        <li><a href="#"><i><img class = "image-con" src="/assets/user.png"></i><p>Account</p></a></li>
        <li><a href="#"><i><img class = "image-con" src="/assets/settings.png"></i><p>Setting</p></a></li>
        <li><a class="ai-img" href="Dashboard-ai-testing.html"><i><img class = "image-con" src="/assets/scanning.png"></i><p>AI Image</p></a></li>
        <div class="active-nav"></div>
      </ul>
    <div>
  </div>
<!--------------------- Container Plant List For Detection ---------------------->
<h1 class='h1-ai-image'> Get Instant & Accurate Crop Disease Detection with Smart Plant</h1>
        <div class="container" id="crops-list">
            <h5 class="h5-ai-image">Smart Plant currently supports the following Crops and their diseases:</h5>
        </div>
                <br>
                <div class="container custom-bg-color rounded" style="padding-top: 12px; padding-bottom: 12px;">
                    <nav>
                        <div class="nav nav-tabs crops-list-tab" style="border: none; padding-bottom: 12px;" id="nav-tab" role="tablist">
                            <button class="nav-link crops-list-tab active rounded" id="nav-apple-tab" data-bs-toggle="tab" data-bs-target="#nav-apple" type="button" role="tab" aria-controls="nav-apple" aria-selected="true">Apple</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-bell-pepper-tab" data-bs-toggle="tab" data-bs-target="#nav-bell-pepper" type="button" role="tab" aria-controls="nav-bell-pepper" aria-selected="false">Bell Pepper</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-blueberry-tab" data-bs-toggle="tab" data-bs-target="#nav-blueberry" type="button" role="tab" aria-controls="nav-blueberry" aria-selected="false">Blueberry</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-cherry-tab" data-bs-toggle="tab" data-bs-target="#nav-cherry" type="button" role="tab" aria-controls="nav-cherry" aria-selected="false">Cherry</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-corn-maize-tab" data-bs-toggle="tab" data-bs-target="#nav-corn-maize" type="button" role="tab" aria-controls="nav-corn-maize" aria-selected="false">Corn (Maize)</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-grape-tab" data-bs-toggle="tab" data-bs-target="#nav-grape" type="button" role="tab" aria-controls="nav-grape" aria-selected="false">Grape</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-orange-tab" data-bs-toggle="tab" data-bs-target="#nav-orange" type="button" role="tab" aria-controls="nav-orange" aria-selected="false">Orange</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-peach-tab" data-bs-toggle="tab" data-bs-target="#nav-peach" type="button" role="tab" aria-controls="nav-peach" aria-selected="false">Peach</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-potato-tab" data-bs-toggle="tab" data-bs-target="#nav-potato" type="button" role="tab" aria-controls="nav-potato" aria-selected="false">Potato</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-raspberry-tab" data-bs-toggle="tab" data-bs-target="#nav-raspberry" type="button" role="tab" aria-controls="nav-raspberry" aria-selected="false">Raspberry</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-rice-tab" data-bs-toggle="tab" data-bs-target="#nav-rice" type="button" role="tab" aria-controls="nav-rice" aria-selected="false">Rice</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-soybean-tab" data-bs-toggle="tab" data-bs-target="#nav-soybean" type="button" role="tab" aria-controls="nav-soybean" aria-selected="false">Soybean</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-squash-tab" data-bs-toggle="tab" data-bs-target="#nav-squash" type="button" role="tab" aria-controls="nav-squash" aria-selected="false">Squash</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-strawberry-tab" data-bs-toggle="tab" data-bs-target="#nav-strawberry" type="button" role="tab" aria-controls="nav-strawberry" aria-selected="false">Strawberry</button>
                            <button class="nav-link crops-list-tab rounded" id="nav-tomato-tab" data-bs-toggle="tab" data-bs-target="#nav-tomato" type="button" role="tab" aria-controls="nav-tomato" aria-selected="false">Tomato</button>
                        </div>
                    </nav>
                    <div class="tab-content custom-bg-color-2 rounded" style="padding-bottom: 5px; padding-top: 17px;" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-apple" role="tabpanel" aria-labelledby="nav-apple-tab">
                            <ul class="plant-list">
                                <li>Apple Scab</li>
                                <li>Black Rot</li>
                                <li>Cedar Rust</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-bell-pepper" role="tabpanel" aria-labelledby="nav-bell-pepper-tab">
                            <ul class="plant-list">
                                <li>Bacterial Spot</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-blueberry" role="tabpanel" aria-labelledby="nav-blueberry-tab">
                            <ul class="plant-list">
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-cherry" role="tabpanel" aria-labelledby="nav-cherry-tab">
                            <ul class="plant-list">
                                <li>Powdery Mildew</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-corn-maize" role="tabpanel" aria-labelledby="nav-corn-maize-tab">
                            <ul class="plant-list">
                                <li>Grey Leaf Spot</li>
                                <li>Common Rust of Maize</li>
                                <li>Northern Leaf Blight</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-grape" role="tabpanel" aria-labelledby="nav-grape-tab">
                            <ul class="plant-list">
                                <li>Black Rot</li>
                                <li>Black Measles (Esca)</li>
                                <li>Leaf Blight (Isariopsis Leaf Spot)</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-orange" role="tabpanel" aria-labelledby="nav-orange-tab">
                            <ul class="plant-list">
                                <li>Huanglongbing (Citrus Greening)</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-peach" role="tabpanel" aria-labelledby="nav-peach-tab">
                            <ul class="plant-list">
                                <li>Bacterial spot</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-potato" role="tabpanel" aria-labelledby="nav-potato-tab">
                            <ul class="plant-list">
                                <li>Early Blight</li>
                                <li>Late Blight</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-raspberry" role="tabpanel" aria-labelledby="nav-raspberry-tab">
                            <ul class="plant-list">
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-rice" role="tabpanel" aria-labelledby="nav-rice-tab">
                            <ul class="plant-list">
                                <li>Brown Spot</li>
                                <li>Hispa</li>
                                <li>Leaf Blast</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-soybean" role="tabpanel" aria-labelledby="nav-soybean-tab">
                            <ul class="plant-list">
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-squash" role="tabpanel" aria-labelledby="nav-squash-tab">
                            <ul class="plant-list">
                                <li>Powdery Mildew</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-strawberry" role="tabpanel" aria-labelledby="nav-strawberry-tab">
                            <ul class="plant-list">
                                <li>Leaf Scorch</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="nav-tomato" role="tabpanel" aria-labelledby="nav-tomato-tab">
                            <ul class="plant-list">
                                <li>Bacterial Spot</li>
                                <li>Early Blight</li>
                                <li>Late Blight</li>
                                <li>Leaf Mold</li>
                                <li>Septoria Leaf Spot</li>
                                <li>Spider Mites (Two-spotted Spider Mite)</li>
                                <li>Target Spot</li>
                                <li>Yellow Leaf Curl Virus</li>
                                <li>Mosaic Virus</li>
                                <li>Healthy</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        <!-- Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
<!------------------------------------------- Ai Image Prediction ------------------------------>
    <div class="container-ai-image">
        <form action="https://agentcrop.azurewebsites.net/api/predict" method = "POST" enctype = "multipart/form-data" id="api-form">
            <input type="file" name="files" multiple required />
            <input type="submit" value="submit" onclick="workingData(data)" />
        </form>
    </div>

        <div id="show-data"></div>
        <script>
            // Function to work with your data.
            function workWithData(data) {
                document.getElementById('show-data').style.backgroundColor = "lightblue";
                document.getElementById('show-data').style.display = "block";
                document.getElementById('show-data').style.position = "relative";
                document.getElementById('show-data').style.width = "1010px";
                document.getElementById('show-data').style.height = "400px";
                document.getElementById('show-data').style.left = "220px";
                document.getElementById('show-data').style.top = "50px";
                document.getElementById('show-data').style.borderRadius = "25px";
                document.getElementById('show-data').style.padding = "12px";
                // Here you can simply show data using iterating through it or you can do whatever you want with it.
                document.getElementById('show-data').innerHTML = "";
                for (let imageName in data) {
                    document.getElementById('show-data').innerHTML += "<h3>" + imageName + ": </h3>";
                    for (let detail in data[imageName]) {
                        document.getElementById('show-data').innerHTML += "<p><strong>" + detail.replace(detail[0], detail[0].toUpperCase()) + ": </strong>" + data[imageName][detail] + "</p>";
                        }
                    }
                }

            // Function to handle submit event.
            function handleFormSubmit(event) {
                
                // Prevent default behavior of submit event.
                event.preventDefault();

                // Get the form element and url.
                const form = event.currentTarget;
                const url = form.action;
                
                // Define formData object to store the images and later send it to API.
                const formData = new FormData();

                // Find file input element.
                const photos = document.querySelector('input[type="file"][multiple]');
                
                // Iterate through file input element and save images to the formData object.
                for (let i = 0; i < photos.files.length; i++) {
                    formData.append('files', photos.files[i]);
                }

                // Below we use fetch to send formData to the API.
                fetch(url, {
                    method: 'POST',
                    body: formData,
                    origin: "*"
                })
                .then(
                    // After that we get response and work with it.
                    function(response) {

                        // If response's ok property is false, then shows error and return.
                        if (!response.ok) {
                            console.log('Looks like there was a problem. Status Code: ' + response.status);
                            return;
                        }

                        // Now we parse response to the json and then get the data object.
                        response.json().then(function(data) {

                            // We will pass data object to external function to work with it.
                            workWithData(data);
                        });
                    }
                )
                .catch(function(err) {
                    
                    // If any error occurs the it will show it.
                    console.log('Fetch Error :-S', err);
                });
            }

            // Get the form element using it's id.
            const apiForm = document.getElementById("api-form");

            // Add event listener on submit event.
            apiForm.addEventListener("submit", handleFormSubmit);
        </script>
    </body>
</html>
